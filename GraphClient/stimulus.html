<!DOCTYPE html>
<meta charset="utf-8">
<head>

  <title>GRAPH</title>
  <!--JAVASCRIPT LIBRARIES -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://use.fontawesome.com/945539d961.js"></script>

  <!-- load the d3.js library -->
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://d3js.org/d3-drag.v1.min.js"></script>
  <script src="https://d3js.org/d3-path.v1.min.js"></script>
  <script src="https://d3js.org/d3-shape.v1.min.js"></script>
  <script src="https://d3js.org/d3-polygon.v1.min.js"></script>
  <script src="graphs.js"></script>


  <!--STYLE SHEETS -->
  <link href="css/styles.css" rel="stylesheet" type="text/css"></link>
  <link href="css/experiment.css" rel="stylesheet" type="text/css"></link>

</head>

<body>
  <div class = "stimulus">
  <div class = "d3container"></div>


    <div class = "userinput">
      <!--  IMAGE SCAFFOLDS AND HINTS  ------------------------------------------------------------------>

      <img class = "static" id="triangular-impasse" src ="img/overlay.triangular-acme-impasse.png" />
      <img class = "static" id="triangular-nonimpasse" src ="img/overlay.triangular-acme-nonimpasse.png" />
      <div class = "legend" id="hint-interactive" style="display:none" >
        <p>Hint: hover your mouse over the data points for help</p>
      </div> <!-- end legend -->

      <!-- STIMULUS QUESTIONS  ---------------------------------------------------------------------->
      <div class=test>
        <div class = "acme" id="acme.start" >
          <p class = "question">THIS IS A PLACEHOLDER QUESTION </p>
          <ul class="checkbox-grid">
        <li><input type="checkbox" name="A" value=A />A</li>
        <li><input type="checkbox" name="B" value=B />B</li>
        <li><input type="checkbox" name="C" value=C />C</li>
        <li><input type="checkbox" name="D" value=D />D</li>
        <li><input type="checkbox" name="E" value=E />E</li>
        <li><input type="checkbox" name="F" value=F />F</li>
        <li><input type="checkbox" name="G" value=G />G</li>
        <li><input type="checkbox" name="H" value=H />H</li>
        <li><input type="checkbox" name="I" value=I />I</li>
        <li><input type="checkbox" name="J" value=J />J</li>
        <li><input type="checkbox" name="K" value=K />K</li>
        <li><input type="checkbox" name="L" value=L />L</li>
        <li><input type="checkbox" name="M" value=M />M</li>
        <li><input type="checkbox" name="N" value=N />N</li>
        <li><input type="checkbox" name="O" value=O />O</li>
      </li>
          <!-- //answer =     "acme.start" : ["C","D","L"]-->
        </div>
      </div> <!--test questions div end-->

      <!-- SUBMIT AND HELP BUTTONS ------------------------------------------------------------------>
      <div class="fixbottom">
    <button type="button" id="start" class='btn' onclick=checkAnswer()>SUBMIT</button>
  </div>
  </div class = "instructions">
</div> <!--end stimulus container-->
</body>

  <script>


    //---------SET PROPERTIES OF THE GRAPH -------------//
    // set the dimensions and margins of the graph
    var margin = {top: 25, right: 30, bottom: 90, left: 100},
      width = 800,
      height = 800;
    var intersects = false; //default value for intersects scaffold
    var xAxisTitle, yAxisTitle;
    var scaffold = 0;
    var clicked = [];
    var hovered ;
    var colorClick = false;
    var axis;
    var condition = 313;
    var q = 6; //question number, passed from experiment.js

    //define data file in experiment.js based on question and condition
    var datafile = "acme_nonimpasse.csv";

    //explicit: 1 (control), 2(text/image), 3(interactive)
    //implicit: 1 (control), 2(impasse)
    //axis: 1(orthogonal), 2(partial), 3(diagonal)


    switch(condition) {

      //FULL GRID CASES - NON IMPASEE
      case 111: //control - no impasse - full grid
        console.log("111: control - no impasse - full grid")
        intersects = false; //intersects off
        axis = "full"; //full orthgonal axis
        datafile = "acme_nonimpasse.csv";
        break;
      case 211:  //text&image - no impasse - full grid
        console.log("211: textimage - no impasse - full grid")
        $('#triangular-nonimpasse').css("display","block"); //display textimage scaffold
        intersects = false; //intersects off
        axis = "full"; //full orthgonal axis
        datafile = "acme_nonimpasse.csv";
        break;
      case 311:  //interactive - no impasse - full grid
        console.log("311: interactive - no impasse - full grid")
        $('#hint-interactive').css("display","block"); //display scaffold
        intersects = true; //intersects are true
        axis = "full"; //full orthgonal axis
        datafile = "acme_nonimpasse.csv";
        break;

      //FULL GRID CASES -  IMPASEE
      case 121:  //control - impasse - full grid
        console.log("121: control - impasse - full grid")
        intersects = false; //intersects off
        axis = "full"; //full orthgonal axis
        datafile = "acme_impasse.csv";
        break;
      case 221:  //text/image - impasse - full grid
        console.log("221: text/image - impasse - full grid")
        $('#triangular-impasse').css("display","block"); //display textimage scaffold
        intersects = false; //intersects off
        axis = "full"; //full orthgonal axis
        datafile = "acme_impasse.csv";
        break;
      case 321:  //interactive - impasse - full grid
        console.log("321: interactive - impasse - full grid")
        intersects = true; //intersects off
        axis = "full"; //full orthgonal axis
        datafile = "acme_impasse.csv";
        break;

      //PARTIAL GRID CASES - NON IMPASSE
      case 112: //control - no impasse - partial grid
        console.log("112: control - no impasse - partial grid")
        intersects = false; //intersects off
        axis = "partial"; //full orthgonal axis
        datafile = "acme_nonimpasse.csv";
        break;
      case 212:  //text&image - no impasse - partial grid
        console.log("212: textimage - no impasse - partial grid")
        $('#triangular-nonimpasse').css("display","block"); //display textimage scaffold
        intersects = false; //intersects off
        axis = "partial"; //full orthgonal axis
        datafile = "acme_nonimpasse.csv";
        break;
      case 312:  //interactive - no impasse - partial grid
        console.log("312: interactive - no impasse - partial grid")
        $('#hint-interactive').css("display","block"); //display scaffold
        intersects = true; //intersects are true
        axis = "partial"; //full orthgonal axis
        datafile = "acme_nonimpasse.csv";
        break;

      //PARTIAL GRID CASES - IMPASSE
      case 122:  //control - impasse - partial grid
        console.log("122: control - impasse - partial grid")
        intersects = false; //intersects off
        axis = "partial"; //full orthgonal axis
        datafile = "acme_impasse.csv";
        break;
      case 222:  //text/image - impasse - partial grid
        console.log("222: text/image - impasse - partial grid")
        $('#triangular-impasse').css("display","block"); //display textimage scaffold
        intersects = false; //intersects off
        axis = "partial"; //full orthgonal axis
        datafile = "acme_impasse.csv";
        break;
      case 322:  //interactive - impasse - partial grid
        console.log("322: interactive - impasse - partial grid")
        intersects = true; //intersects off
        axis = "partial"; //full orthgonal axis
        datafile = "acme_impasse.csv";
        break;

      //DIAGONAL GRID CASES - NON IMPASSE
      case 113: //control - no impasse - diagonal grid
        console.log("113: control - no impasse - diagonal grid")
        intersects = false; //intersects off
        axis = "diagonal";
        datafile = "acme_nonimpasse.csv";
        break;
      case 213:  //text&image - no impasse - diagonal grid
        console.log("213: textimage - no impasse - diagonal grid")
        $('#triangular-nonimpasse').css("display","block"); //display textimage scaffold
        intersects = false; //intersects off
        axis = "diagonal";
        datafile = "acme_nonimpasse.csv";
        break;
      case 313:  //interactive - no impasse - diagonal grid
        console.log("313: interactive - no impasse - diagonal grid")
        $('#hint-interactive').css("display","block"); //display scaffold
        intersects = true; //intersects are true
        axis = "diagonal";
        datafile = "acme_nonimpasse.csv";
        break;

      //DIAGONAL GRID CASES -  IMPASSE
      case 123:  //control - impasse - diagonal grid
        console.log("123: control - impasse - diagonal grid")
        intersects = false; //intersects off
        axis = "diagonal";
        datafile = "acme_impasse.csv";
        break;
      case 223:  //text/image - impasse - diagonal grid
        console.log("223: text/image - impasse - diagonal grid")
        $('#triangular-impasse').css("display","block"); //display textimage scaffold
        intersects = false; //intersects off
        axis = "diagonal";
        datafile = "acme_impasse.csv";
        break;
      case 323:  //interactive - impasse - diagonal grid
        console.log("323: interactive - impasse - diagonal grid")
        intersects = true; //intersects off
        axis = "diagonal";
        datafile = "acme_impasse.csv";
        break;
      default:
          axis = "full";
          intersects = "false";
        break;
    }

    if (q > 5) { //override data file if q# is greater than 5
      datafile = "data_3.csv";
      console.log("override data file");
    }

    // //---------CREATE THE SVG  ------------------------//
    var svg = d3.select(".d3container").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform",  "translate(" + margin.left + "," + margin.top + ")");

    //---------DRAW THE GRAPH  ------------------------//
      xAxisTitle = "START & END TIME (time of day)";
      yAxisTitle = "DURATION (in hours)";
      drawTriangleModel(datafile,scaffold,axis);

</script>
